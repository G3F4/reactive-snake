{"version":3,"sources":["enums.ts","models/Point.ts","models/Snake.ts","components/game/cell/Cell.tsx","components/game/fruit/Fruit.tsx","components/game/snake-body/SnakeBody.tsx","components/game/snake-head/SnakeHead.tsx","components/game/Game.tsx","components/app/App.tsx","constans.ts","index.tsx"],"names":["DIRECTION","Point","x","y","Object","classCallCheck","this","Snake","body","direction","arguments","length","undefined","RIGHT","createClass","key","value","TOP","concat","toConsumableArray","slice","BOTTOM","LEFT","Cell","react_default","a","createElement","className","Fruit","SnakeBody","SnakeHead","Game","_ref","fruit","snake","gridSize","Array","from","map","index","osY","osX","snakeCellIndex","findIndex","bodyPart","game_snake_head_SnakeHead","game_snake_body_SnakeBody","game_fruit_Fruit","game_cell_Cell","App","_useState","useState","Math","floor","random","_useState2","slicedToArray","_useState3","GRID_SIZE","_useState4","setSnake","useEffect","document","onkeydown","e","keyCode","setDirection","setInterval","move","console","log","components_game_Game","ReactDOM","render","components_app_App","getElementById"],"mappings":"4QAAYA,iJCACC,EACX,SAAAA,EACWC,EACAC,GACRC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,GAAAK,KAAAJ,IAAAI,KAAAH,mBCDQI,EAAb,WACE,SAAAA,EACWC,GAET,IADSC,EACTC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GADgCV,EAAUa,MAC1CT,OAAAC,EAAA,EAAAD,CAAAE,KAAAC,GAAAD,KAAAE,OAAAF,KAAAG,YAJJ,OAAAL,OAAAU,EAAA,EAAAV,CAAAG,EAAA,EAAAQ,IAAA,OAAAC,MAAA,WAOI,OAAQV,KAAKG,WACX,KAAKT,EAAUiB,IACb,OAAO,IAAIV,EAAJ,CAEH,IAAIN,EAAMK,KAAKE,KAAK,GAAGN,EAAGI,KAAKE,KAAK,GAAGL,EAAI,IAFxCe,OAAAd,OAAAe,EAAA,EAAAf,CAGAE,KAAKE,KAAKY,MAAM,EAAGd,KAAKE,KAAKG,OAAS,KAE3CL,KAAKG,WAET,KAAKT,EAAUqB,OACb,OAAO,IAAId,EAAJ,CAEH,IAAIN,EAAMK,KAAKE,KAAK,GAAGN,EAAGI,KAAKE,KAAK,GAAGL,EAAI,IAFxCe,OAAAd,OAAAe,EAAA,EAAAf,CAGAE,KAAKE,KAAKY,MAAM,EAAGd,KAAKE,KAAKG,OAAS,KAE3CL,KAAKG,WAET,KAAKT,EAAUsB,KACb,OAAO,IAAIf,EAAJ,CAEH,IAAIN,EAAMK,KAAKE,KAAK,GAAGN,EAAI,EAAGI,KAAKE,KAAK,GAAGL,IAFxCe,OAAAd,OAAAe,EAAA,EAAAf,CAGAE,KAAKE,KAAKY,MAAM,EAAGd,KAAKE,KAAKG,OAAS,KAE3CL,KAAKG,WAET,KAAKT,EAAUa,MACb,OAAO,IAAIN,EAAJ,CAEH,IAAIN,EAAMK,KAAKE,KAAK,GAAGN,EAAI,EAAGI,KAAKE,KAAK,GAAGL,IAFxCe,OAAAd,OAAAe,EAAA,EAAAf,CAGAE,KAAKE,KAAKY,MAAM,EAAGd,KAAKE,KAAKG,OAAS,KAE3CL,KAAKG,WAIX,OAAOH,OA1CX,CAAAS,IAAA,eAAAC,MAAA,SA6CsBP,GAClB,OAAO,IAAIF,EACTD,KAAKE,KACLC,OAhDNF,EAAA,GCEegB,eAFQ,kBAAMC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WCE7BC,SAFS,kBAAMJ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,YCE9BE,SAFa,kBAAML,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBCElCG,SAFa,kBAAMN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBCkDlCI,EAtCmB,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,MAAOC,EAAVF,EAAUE,MAAOC,EAAjBH,EAAiBG,SAAjB,OAChCX,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACZS,MAAMC,KAAK,CAAE1B,OAAQwB,IACnBG,IAAI,SAACtB,EAAOuB,GAAR,OAAkBA,IACtBD,IAAI,SAAAE,GAAG,OACNhB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,MAAMZ,IAAKyB,GACvBJ,MAAMC,KAAK,CAAE1B,OAAQwB,IACnBG,IAAI,SAACtB,EAAOuB,GAAR,OAAkBA,IACtBD,IAAI,SAAAG,GACH,IAAMC,EAAiBR,EAAM1B,KAC1BmC,UAAU,SAAAC,GAAQ,OAAIA,EAAS1C,IAAMuC,GAAOG,EAASzC,IAAMqC,IAG9D,OAFkBE,GAAkB,EAGX,IAAnBA,EACKlB,EAAAC,EAAAC,cAACmB,EAAD,MAGFrB,EAAAC,EAAAC,cAACoB,EAAD,MAGLL,IAAQR,EAAM/B,GAAKsC,IAAQP,EAAM9B,EAEjCqB,EAAAC,EAAAC,cAACqB,EAAD,MAKFvB,EAAAC,EAAAC,cAACsB,EAAD,CAAMjC,IAAK0B,WCsBZQ,SAzDO,WAAM,IAAAC,EACAC,mBACxB,IAAIlD,EAAMmD,KAAKC,MCVM,GDUAD,KAAKE,UAAuBF,KAAKC,MCVjC,GDUuCD,KAAKE,YAFzCC,EAAAnD,OAAAoD,EAAA,EAAApD,CAAA8C,EAAA,GACnBjB,EADmBsB,EAAA,GAAAE,GAAAF,EAAA,GAIAJ,mBACxB,IAAI5C,EACF,CACE,IAAIN,EAAMyD,GAAeA,IACzB,IAAIzD,EAAMyD,GAAeA,QARLC,EAAAvD,OAAAoD,EAAA,EAAApD,CAAAqD,EAAA,GAInBvB,EAJmByB,EAAA,GAIZC,EAJYD,EAAA,GAkD1B,OArCAE,oBAAU,WAiBRC,SAASC,UAhBgB,SAACC,GACN,KAAdA,EAAEC,QACJL,EAAS,SAAA1B,GAAK,OAAIA,EAAMgC,aAAalE,EAAUiB,OAE1B,KAAd+C,EAAEC,QACTL,EAAS,SAAA1B,GAAK,OAAIA,EAAMgC,aAAalE,EAAUqB,UAE1B,KAAd2C,EAAEC,QACTL,EAAS,SAAA1B,GAAK,OAAIA,EAAMgC,aAAalE,EAAUsB,QAE1B,KAAd0C,EAAEC,SACTL,EAAS,SAAA1B,GAAK,OAAIA,EAAMgC,aAAalE,EAAUa,WAalD,IAEHgD,oBAAU,WACRM,YAAY,WACVP,EAAS,SAAA1B,GAAK,OAAIA,EAAMkC,UCjDV,MDmDf,IAEHP,oBAAU,WACRQ,QAAQC,IAAI,CAAC,mBACZ,CAACpC,IAGFV,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACbH,EAAAC,EAAAC,cAAC6C,EAAD,CAAMpC,SC5Da,GD4DQD,MAAOA,EAAOD,MAAOA,OEvDtDuC,IAASC,OAAOjD,EAAAC,EAAAC,cAACgD,EAAD,MAASZ,SAASa,eAAe","file":"static/js/main.e0120f65.chunk.js","sourcesContent":["export enum DIRECTION {\n  TOP = 'TOP',\n  BOTTOM = 'BOTTOM',\n  LEFT = 'LEFT',\n  RIGHT = 'RIGHT',\n}\n","export class Point {\n  constructor(\n    readonly x: number,\n    readonly y: number,\n  ) {}\n}\n","import { DIRECTION } from '../enums';\nimport { Point } from './Point';\n\nexport class Snake {\n  constructor(\n    readonly body: Point[],\n    readonly direction: DIRECTION = DIRECTION.RIGHT,\n  ) {}\n\n  public move(): Snake {\n    switch (this.direction) {\n      case DIRECTION.TOP:\n        return new Snake(\n          [\n            new Point(this.body[0].x, this.body[0].y - 1),\n            ...this.body.slice(0, this.body.length - 1),\n          ],\n          this.direction\n        );\n      case DIRECTION.BOTTOM:\n        return new Snake(\n          [\n            new Point(this.body[0].x, this.body[0].y + 1),\n            ...this.body.slice(0, this.body.length - 1),\n          ],\n          this.direction\n        );\n      case DIRECTION.LEFT:\n        return new Snake(\n          [\n            new Point(this.body[0].x - 1, this.body[0].y),\n            ...this.body.slice(0, this.body.length - 1),\n          ],\n          this.direction\n        );\n      case DIRECTION.RIGHT:\n        return new Snake(\n          [\n            new Point(this.body[0].x + 1, this.body[0].y),\n            ...this.body.slice(0, this.body.length - 1),\n          ],\n          this.direction\n        );\n    }\n\n    return this;\n  }\n\n  public setDirection(direction: DIRECTION): Snake {\n    return new Snake(\n      this.body,\n      direction,\n    );\n  }\n}\n","import React from 'react';\nimport './Cell.css';\n\nconst Cell: React.FC = () => <div className=\"Cell\" />;\n\nexport default Cell;\n","import React from 'react';\nimport './Fruit.css';\n\nconst Fruit: React.FC = () => <div className=\"Fruit\" />;\n\nexport default Fruit;\n","import React from 'react';\nimport './SnakeBody.css';\n\nconst SnakeBody: React.FC = () => <div className=\"SnakeBody\" />;\n\nexport default SnakeBody;\n","import React from 'react';\nimport './SnakeHead.css';\n\nconst SnakeHead: React.FC = () => <div className=\"SnakeHead\" />;\n\nexport default SnakeHead;\n","import React from 'react';\nimport { Point } from '../../models/Point';\nimport { Snake } from '../../models/Snake';\nimport './Game.css';\nimport Cell from './cell/Cell';\nimport Fruit from './fruit/Fruit';\nimport SnakeBody from './snake-body/SnakeBody';\nimport SnakeHead from './snake-head/SnakeHead';\n\ninterface GameProps {\n  gridSize: number;\n  snake: Snake;\n  fruit: Point;\n}\n\nconst Game: React.FC<GameProps> = ({ fruit, snake, gridSize }) => (\n  <div className=\"Game\">\n    {Array.from({ length: gridSize })\n      .map((value, index) => index)\n      .map(osY => (\n        <div className=\"OsX\" key={osY}>\n          {Array.from({ length: gridSize })\n            .map((value, index) => index)\n            .map(osX => {\n              const snakeCellIndex = snake.body\n                .findIndex(bodyPart => bodyPart.x === osX && bodyPart.y === osY);\n              const snakeCell = snakeCellIndex >= 0;\n\n              if (snakeCell) {\n                if (snakeCellIndex === 0) {\n                  return <SnakeHead />;\n                }\n\n                return <SnakeBody />;\n              }\n\n              if (osX === fruit.x && osY === fruit.y) {\n                return (\n                  <Fruit />\n                );\n              }\n\n              return (\n                <Cell key={osX} />\n              );\n            })\n          }\n        </div>\n      ))\n    }\n  </div>\n);\n\nexport default Game;\n","import React, { KeyboardEvent, useEffect, useState } from 'react';\nimport { GRID_SIZE, TICK } from '../../constans';\nimport { DIRECTION } from '../../enums';\nimport { Point } from '../../models/Point';\nimport { Snake } from '../../models/Snake';\nimport Game from '../game/Game';\nimport './App.css';\n\nconst App: React.FC = () => {\n  const [fruit, setFruit] = useState(\n    new Point(Math.floor(Math.random() * GRID_SIZE), Math.floor(Math.random() * GRID_SIZE)),\n  );\n  const [snake, setSnake] = useState(\n    new Snake(\n      [\n        new Point(GRID_SIZE / 2, GRID_SIZE / 2),\n        new Point(GRID_SIZE / 2, GRID_SIZE / 2 + 1),\n      ],\n    ),\n  );\n\n  useEffect(() => {\n    const handleKeyPressed = (e: KeyboardEvent) => {\n      if (e.keyCode === 38) { // up arrow\n        setSnake(snake => snake.setDirection(DIRECTION.TOP));\n      }\n      else if (e.keyCode === 40) { // down arrow\n        setSnake(snake => snake.setDirection(DIRECTION.BOTTOM));\n      }\n      else if (e.keyCode === 37) { // left arrow\n        setSnake(snake => snake.setDirection(DIRECTION.LEFT));\n      }\n      else if (e.keyCode === 39) { // right arrow\n        setSnake(snake => snake.setDirection(DIRECTION.RIGHT));\n      }\n    };\n\n    // @ts-ignore\n    document.onkeydown = handleKeyPressed;\n\n    // #todo dlaczego to nie dziaÅ‚a?\n    // document.addEventListener(\"onkeydown\", handleKeyPressed);\n    //\n    // return () => {\n    //   document.removeEventListener(\"onkeydown\", handleKeyPressed);\n    // }\n  }, []);\n\n  useEffect(() => {\n    setInterval(() => {\n      setSnake(snake => snake.move());\n    }, TICK);\n  }, []);\n\n  useEffect(() => {\n    console.log(['snake changed'])\n  }, [snake]);\n\n  return (\n    <div className=\"App\">\n      <Game gridSize={GRID_SIZE} snake={snake} fruit={fruit} />\n    </div>\n  );\n};\n\nexport default App;\n","export const GRID_SIZE = 50;\nexport const TICK = 500;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/app/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}